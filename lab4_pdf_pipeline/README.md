# Лабораторная работа №4: Обработка PDF-документов и векторный поиск

## Цель

Разработать систему для извлечения информации из PDF-документов, её векторизации и создания механизма семантического поиска с использованием векторной базы данных.

## Задачи

1. Реализовать извлечение текста из PDF-документов.
2. Разработать механизм разбиения текста на смысловые чанки.
3. Создать систему генерации векторных эмбеддингов с помощью OpenAI API.
4. Настроить хранение векторных представлений в LanceDB.
5. Реализовать функционал семантического поиска по запросу пользователя.

## Требования

- Библиотеки: `docling`, `lancedb`
- Обработка минимум 15-17 PDF-документов

## Рекомендации по реализации

1. **Извлечение текста**: Используйте библиотеку `docling` для эффективного извлечения текста из PDF.
2. **Чанкинг**: Применяйте `HybridChunker` для разбиения на смысловые блоки, учитывая ограничения по токенам.
3. **Создание эмбеддингов**: Используйте эмбеды из прошлой лабораторной.
4. **Векторная база данных**: Настройте LanceDB для эффективного хранения и поиска векторов.
5. **Обработка ошибок API**: Реализуйте механизм повторных попыток при ошибках API с экспоненциальным откатом.


## Алгоритм работы

1. **Загрузка и обработка PDF**:
   - Получение списка PDF-файлов из указанной директории
   - Извлечение текста с помощью библиотеки docling
   - Разбиение текста на смысловые чанки с контролем размера

2. **Создание и хранение эмбеддингов**:
   - Генерация эмбеддингов для каждого чанка
   - Определение схемы таблицы для LanceDB
   - Сохранение чанков и их векторных представлений в базе данных

3. **Поисковые операции**:
   - Преобразование пользовательского запроса в векторное представление
   - Поиск наиболее семантически близких чанков в базе данных
   - Форматирование и отображение результатов поиска


## Результаты

Созданная векторная база данных и механизм поиска могут быть использованы для построения систем вопросно-ответного типа, таких как чат-боты с возможностью отвечать на вопросы о содержимом документов.
